{"version":3,"file":"bcui.min.js","sources":["../src/script/index.js"],"sourcesContent":["//import moment from 'moment';\r\n\r\n\r\nconst tables = document.querySelectorAll('table');\r\nvar header\r\n\r\ntables.forEach(table => {\r\n    const headerCells = table.querySelectorAll('th');\r\n\r\n    headerCells.forEach(headerCell => {\r\n\r\n        const resizeBar = document.createElement('resizebar');\r\n        headerCell.appendChild(resizeBar)\r\n\r\n        resizeBar.addEventListener('mousedown', startResize);\r\n    });\r\n\r\n\r\n});\r\n\r\nfunction startResize(e) {\r\n    header = e.currentTarget.parentElement;\r\n\r\n\r\n\r\n    const startX = e.clientX;\r\n    document.addEventListener('mousemove', moveResize);\r\n    document.addEventListener('mouseup', stopResize);\r\n\r\n    function moveResize(e) {\r\n\r\n        header.style.width = e.clientX - header.offsetLeft - 8\r\n        var colIndex = header.getAttribute('colIndex')\r\n\r\n        var colstoupdate = document.querySelectorAll('[colindex=\"' + colIndex + '\"]')\r\n        colstoupdate.forEach(coltoupdate => {\r\n            coltoupdate.style.width = e.clientX - header.offsetLeft - 8\r\n        });\r\n\r\n    }\r\n\r\n    function stopResize() {\r\n        document.removeEventListener('mousemove', moveResize);\r\n        document.removeEventListener('mouseup', stopResize);\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction renderTable(HTMLElement, data) {\r\n\r\n    HTMLElement.style.display = 'grid';\r\n\r\n    var cols = Object.keys(data[0].table).length\r\n\r\n\r\n    // console.log(HTMLElement);\r\n    console.log(HTMLElement);\r\n    console.log(HTMLElement.offsetWidth);\r\n    console.log(getComputedStyle(HTMLElement).width);\r\n\r\n\r\n\r\n\r\n    var colWidth = 100;\r\n    if (cols <= 5) {\r\n        colWidth = HTMLElement.offsetWidth / cols;\r\n    } else {\r\n        colWidth = HTMLElement.offsetWidth / 5;\r\n    }\r\n\r\n    console.log(colWidth);\r\n    colWidth -= 15\r\n\r\n    console.log(colWidth);\r\n\r\n    var tablerow = document.createElement('tablerow');\r\n    var colIndex = 0;\r\n    for (const key in data[0].table) {\r\n        if (Object.hasOwnProperty.call(data[0].table, key)) {\r\n            const element = data[0].table[key];\r\n            //console.log(key, element);\r\n\r\n            var tableheader = document.createElement('tableheader');\r\n            tableheader.innerHTML = element.caption;\r\n            tableheader.setAttribute(\"colIndex\", colIndex);\r\n            tableheader.style.width = `${colWidth}px`;\r\n            const resizeBar = document.createElement('resizebar');\r\n            tableheader.appendChild(resizeBar)\r\n\r\n            resizeBar.addEventListener('mousedown', startResize);\r\n\r\n            tablerow.appendChild(tableheader);\r\n            HTMLElement.appendChild(tablerow)\r\n            colIndex++\r\n        }\r\n    }\r\n\r\n    colIndex = 0;\r\n\r\n    //console.log(data);\r\n    data.forEach(element => {\r\n        //Zeile \r\n        var tablerow = document.createElement('tablerow');\r\n\r\n        for (const key in element.table) {\r\n            if (Object.hasOwnProperty.call(element.table, key)) {\r\n                //Zeilendaten \r\n                const element1 = element.table[key];\r\n\r\n                var tabledata = document.createElement('tabledata');\r\n                tabledata.setAttribute(\"colIndex\", colIndex);\r\n\r\n\r\n                var field\r\n                //console.log(element1);\r\n                switch (element1.type) {\r\n                    case 'String':\r\n                        field = document.createElement('input');\r\n                        field.type = 'text';\r\n                        field.classList.add('form');\r\n                        field.value = element1.value;\r\n                        break;\r\n                    case 'Option':\r\n                        field = document.createElement('select');\r\n                        // field.type = 'text';\r\n                        field.classList.add('form');\r\n\r\n                        options[element1.options].forEach(option => {\r\n                            var optionsHTML = document.createElement('option');\r\n                            optionsHTML.innerHTML = option\r\n                            field.appendChild(optionsHTML)\r\n                        });\r\n\r\n                        field.value = element1.value;\r\n                        break;\r\n\r\n                    default:\r\n                        field = document.createElement('input');\r\n                        field.type = 'text';\r\n                        field.classList.add('form');\r\n                        field.value = element1.value;\r\n                        break;\r\n                }\r\n\r\n                field.setAttribute(\"colIndex\", colIndex);\r\n\r\n                tabledata.appendChild(field);\r\n\r\n                tabledata.style.width = `${colWidth}px`;\r\n                tablerow.appendChild(tabledata);\r\n            }\r\n            colIndex++\r\n        }\r\n        colIndex = 0\r\n        HTMLElement.appendChild(tablerow)\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction createPastFutureArray(startMoment, stepsPast, stepsFuture, interval = 'day') {\r\n    const timeArray = [];\r\n\r\n    // Zeitpunkte in die Vergangenheit\r\n    for (let i = stepsPast; i > 0; i--) {\r\n        timeArray.push(startMoment.clone().subtract(i, interval));\r\n    }\r\n\r\n    // Startzeitpunkt\r\n    timeArray.push(startMoment);\r\n\r\n    // Zeitpunkte in die Zukunft\r\n    for (let i = 1; i <= stepsFuture; i++) {\r\n        timeArray.push(startMoment.clone().add(i, interval));\r\n    }\r\n\r\n    return timeArray;\r\n}\r\n\r\n\r\n\r\n\r\nfunction renderTimeline(HTMLElement, data) {\r\n\r\n    // Beispiel: Startpunkt heute, 5 Schritte in die Vergangenheit, 5 in die Zukunft\r\n    const today = moment().add(3, 'hour');\r\n    const pastFutureArray = createPastFutureArray(today, 7, 7);\r\n\r\n    // Ausgabe (formatiert fÃ¼r bessere Lesbarkeit)\r\n    pastFutureArray.forEach(time => {\r\n        console.log(time.format('DD.MM.YYYY HH'));\r\n\r\n        var div = document.createElement('timeunitwrapper');\r\n        var timeunit = document.createElement('timeunit');\r\n        timeunit.innerHTML = time.format('DD.MM.YY');\r\n        div.appendChild(timeunit);\r\n\r\n\r\n        for (let index = 1; index < 25; index++) {\r\n\r\n            var timeitem = document.createElement('timeitem');\r\n            timeitem.innerHTML = index;\r\n            div.appendChild(timeitem);\r\n        }\r\n\r\n        HTMLElement.querySelector('header').appendChild(div);\r\n\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    /*     data.forEach(element => {\r\n            element.timeline.forEach(timelineElement => {\r\n            });\r\n        }); */\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction getControlAddin(params) {\r\n    return document.getElementById('controlAddIn');\r\n}\r\n\r\nfunction Init(params) {\r\n    document.getElementById('controlAddIn').insertAdjacentHTML('beforeend', html)\r\n\r\n}\r\n\r\n\r\n\r\nvar data = [\r\n    {\r\n        table: {\r\n            id: { value: 1, caption: 'ID', type: 'String' },\r\n            age: { value: 25, caption: 'Alter' },\r\n            city: { value: 'Hamburg', caption: 'City', type: 'Option', options: 'cities' },\r\n            test: { value: 'DE', caption: 'Land' }\r\n        },\r\n        timeline: [\r\n            {\r\n                start: '2024-06-03',\r\n                end: '2024-06-14',\r\n                name: 'TEST',\r\n                desc: 'TEST',\r\n                id: 'key1'\r\n            },\r\n            {\r\n                start: '2024-06-03',\r\n                end: '2024-06-14',\r\n                name: 'TEST',\r\n                desc: 'TEST',\r\n                id: 'key1'\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        table: {\r\n            id: { value: 2, caption: 'ID' },\r\n            age: { value: 35, caption: 'Alter' },\r\n            city: { value: 'Hamburg', type: 'Option', options: 'cities' },\r\n            test: { value: 'Hamburg' }\r\n        },\r\n        timeline: {\r\n            start: '2024-06-03',\r\n            end: '2024-06-14',\r\n            name: 'TEST',\r\n            desc: 'TEST',\r\n            id: 'key1'\r\n        }\r\n    },\r\n    {\r\n        table: {\r\n            id: { value: 3 },\r\n            age: { value: 30 },\r\n            city: { value: 'Hamburg', type: 'Option', options: 'cities' },\r\n            test: { value: 'New York' }\r\n        },\r\n        timeline: {\r\n            start: '2024-06-03',\r\n            end: '2024-06-14',\r\n            name: 'TEST',\r\n            desc: 'TEST',\r\n            id: 'key1'\r\n        }\r\n    }\r\n]\r\n\r\nvar options = {\r\n    cities: ['London', 'Hamburg', 'New York']\r\n}\r\n\r\n//new Date('2024-06-03 19:23:11')\r\n\r\nlet jobs = [\r\n    {\r\n        start: '2024-06-03',\r\n        end: '2024-06-14',\r\n        name: 'TEST',\r\n        desc: 'TEST',\r\n        id: 'key1',\r\n        subjobs: [\r\n            {\r\n                start: '2024-06-03',\r\n                end: '2024-06-14',\r\n                name: 'TEST',\r\n                desc: 'TEST',\r\n                id: 'key2',\r\n                subjobs: [\r\n\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n]\r\n\r\nfunction RenderGantt(params) {\r\n\r\n\r\n    console.log(moment().format());\r\n\r\n    var diag = document.querySelector('bcgantt')\r\n\r\n    // diag.querySelector('left')\r\n\r\n    //renderTable(document.getElementById('testtable'), data)\r\n    renderTable(diag.querySelector('bctable'), data)\r\n    renderTimeline(diag.querySelector('timeline'), data)\r\n\r\n\r\n\r\n\r\n}\r\n\r\nRenderGantt()"],"names":["header","startResize","e","moveResize","style","width","clientX","offsetLeft","colIndex","getAttribute","document","querySelectorAll","forEach","coltoupdate","currentTarget","parentElement","addEventListener","stopResize","removeEventListener","table","headerCell","resizeBar","createElement","appendChild","data","id","value","caption","type","age","city","options","test","timeline","start","end","name","desc","cities","params","console","log","moment","format","HTMLElement","diag","querySelector","display","cols","Object","keys","length","offsetWidth","getComputedStyle","colWidth","tablerow","key","hasOwnProperty","call","element","tableheader","innerHTML","setAttribute","element1","field","tabledata","classList","add","option","optionsHTML","renderTable","startMoment","stepsPast","stepsFuture","interval","timeArray","i","push","clone","subtract","createPastFutureArray","time","div","timeunit","index","timeitem","RenderGantt"],"mappings":"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"}